<style type="text/css">
  body {
    background: <%= @view_object.meta["colors"]["light"]["bg"] %>;
  }
</style>

<div class="photo-wrapper">
  <%= image_tag url_for(@view_object.large_photo),
      id: "photo",
      width: @view_object.photo_width,
      height: @view_object.photo_height %>
</div>

<div class="photo-sidebar no-scrollbars" data-controller="comment-box" data-post-id="<%= @view_object.id %>">
  <%= render "user_info", user: @view_object.user, class: "author" %>

  <% if @view_object.has?(:description) %>
    <div>
      <%= simple_format @view_object.description %>
    </div>
  <% end %>

  <ul class="photo-meta">
    <% if @view_object.has?(:camera) %>
      <li>
        <%= icon :camera %>
        <%= @view_object.camera %>
      </li>
    <% end %>

    <% if @view_object.has?(:lens) %>
      <li>
        <%= icon :lens %>
        <%= @view_object.lens %>
      </li>
    <% end %>

    <% if @view_object.has?(:technical_info) %>
      <li>
        <%= icon :info %>
        <%= @view_object.technical_info %>
      </li>
    <% end %>

    <% if @view_object.has?(:country) %>
      <li>
        <%= icon :pin %>
        <%= post_location(@view_object) %>
      </li>
    <% end %>

    <% if @view_object.has?(:photo_taken_at) %>
      <li>
        <%= icon :calendar %>
        <%= localize(@view_object.photo_taken_at.to_date, format: :long) %>
      </li>
    <% end %>

    <li>
      <%= icon :calendar, class: "icon opacity-0" %>
      <time class="text-xs" datetime="<%= @view_object.created_at.iso8601 %>">
        <%= t(".uploaded", time: time_ago_in_words(@view_object.created_at)) %>
      </time>
    </li>

    <li>
      <%= like_button(@view_object) %>
    </li>
  </ul>

  <div class="comments" data-comment-box-target="list">
    <% @view_object.comments.each do |comment| %>
      <%= render comment %>
    <% end %>
  </div>

  <div class="post-comment-box" data-controller="chars-counter" data-chars-counter-limit="500">
    <div>
      <p>
        <textarea placeholder="<%= t("simple_form.placeholders.posts.comment") %>"  data-comment-box-target="input" data-chars-counter-target="input"></textarea>
      </p>

      <p class="mt-0 leading-none relative">
        <button data-chars-counter-target="button" data-comment-box-target="button" disabled class="link-button"><%= t("js.comment_box.post") %></button>
        <span data-chars-counter-target="count" class="absolute right-0 bottom-0"></span>
      </p>
    </div>
  </div>
</div>
